# üé® CSS Variables & Functions
## Complete 10-Minute Guide

> Master CSS custom properties and functions with comprehensive examples and real-world applications.

---

## üìã Table of Contents

1. [üîß CSS Variables (Custom Properties)](#-css-variables-custom-properties)
   - [Basic Syntax & Declaration](#basic-syntax--declaration)
   - [Variable Scope & Inheritance](#variable-scope--inheritance)
   - [Dynamic Updates with JavaScript](#dynamic-updates-with-javascript)
   - [Advanced Variable Techniques](#advanced-variable-techniques)
2. [üßÆ CSS Functions](#-css-functions)
   - [calc() - Mathematical Operations](#calc---mathematical-operations)
   - [min(), max(), clamp() - Range Control](#min-max-clamp---range-control)
   - [var() - Variable Access](#var---variable-access)
   - [Color Functions](#color-functions)
   - [Other Useful Functions](#other-useful-functions)
3. [üöÄ Real-World Applications](#-real-world-applications)
   - [Complete Theme System](#complete-theme-system)
   - [Responsive Design System](#responsive-design-system)
   - [Component Architecture](#component-architecture)
   - [Animation & Transitions](#animation--transitions)
4. [üí° Advanced Patterns](#-advanced-patterns)
5. [üîß Best Practices](#-best-practices)
6. [üêõ Common Pitfalls & Solutions](#-common-pitfalls--solutions)
7. [ÔøΩ Browser Support & Fallbacks](#-browser-support--fallbacks)

**‚è±Ô∏è Reading Time:** 10 minutes  
**üéØ Skill Level:** Beginner to Advanced

---

## üîß CSS Variables (Custom Properties)

CSS custom properties (variables) revolutionize how we write maintainable CSS by allowing us to store and reuse values throughout our stylesheets.

### Basic Syntax & Declaration

CSS variables store reusable values and follow specific naming conventions:

```css
/* Define variables in :root for global scope */
:root {
  /* Colors */
  --primary-color: #3498db;
  --secondary-color: #2ecc71;
  --danger-color: #e74c3c;
  --success-color: #27ae60;
  
  /* Typography */
  --font-family-primary: 'Inter', sans-serif;
  --font-size-base: 1rem;
  --font-size-large: 1.5rem;
  --line-height-base: 1.6;
  
  /* Spacing */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 2rem;
  --spacing-xl: 4rem;
  
  /* Layout */
  --border-radius: 8px;
  --box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  --transition-speed: 0.3s;
  --max-width: 1200px;
}

/* Use variables with var() function */
.button {
  background-color: var(--primary-color);
  color: white;
  font-size: var(--font-size-base);
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--border-radius);
  border: none;
  cursor: pointer;
  transition: all var(--transition-speed) ease;
}

/* Fallback values for undefined variables */
.text {
  color: var(--text-color, #333); /* Falls back to #333 if --text-color is undefined */
  font-family: var(--font-family-secondary, Arial, sans-serif);
}

/* Variables can contain complex values */
:root {
  --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --shadow-elevated: 0 10px 25px rgba(0,0,0,0.1), 0 4px 10px rgba(0,0,0,0.1);
  --transform-hover: translateY(-2px) scale(1.02);
}
```

### Variable Scope & Inheritance

Variables follow CSS cascade rules and can be scoped to different elements:

```css
/* Global variables */
:root {
  --main-bg: white;
  --text-color: black;
  --accent: #007bff;
}

/* Component-scoped variables */
.card {
  --card-bg: var(--main-bg);
  --card-padding: var(--spacing-lg);
  --card-shadow: var(--box-shadow);
  --card-border: 1px solid #e9ecef;
  
  background: var(--card-bg);
  padding: var(--card-padding);
  box-shadow: var(--card-shadow);
  border: var(--card-border);
  border-radius: var(--border-radius);
}

/* Nested scope - child inherits and can override */
.card .header {
  --header-bg: #f8f9fa;
  --header-padding: var(--spacing-md);
  
  background: var(--header-bg);
  padding: var(--header-padding);
  margin: calc(var(--card-padding) * -1) calc(var(--card-padding) * -1) var(--spacing-md);
}

/* Media query scope */
@media (max-width: 768px) {
  :root {
    --spacing-lg: 1rem; /* Reduce spacing on mobile */
    --font-size-large: 1.25rem;
  }
}

/* Context-specific overrides */
.dark-theme {
  --main-bg: #1a1a1a;
  --text-color: #ffffff;
  --accent: #4dabf7;
  --card-bg: #2d2d2d;
  --card-border: 1px solid #404040;
}

.high-contrast {
  --primary-color: #000000;
  --secondary-color: #ffffff;
  --accent: #ffff00;
}
```

### Dynamic Updates with JavaScript

Variables can be manipulated at runtime for interactive features:

```css
.theme-switcher {
  --theme-transition: all 0.3s ease;
  background: var(--main-bg);
  color: var(--text-color);
  transition: var(--theme-transition);
}

.interactive-element {
  --scale: 1;
  --rotation: 0deg;
  --opacity: 1;
  
  transform: scale(var(--scale)) rotate(var(--rotation));
  opacity: var(--opacity);
  transition: transform 0.3s ease, opacity 0.3s ease;
}
```

```javascript
// Theme switching
function switchTheme(theme) {
  const root = document.documentElement;
  
  if (theme === 'dark') {
    root.style.setProperty('--main-bg', '#1a1a1a');
    root.style.setProperty('--text-color', '#ffffff');
    root.style.setProperty('--accent', '#4dabf7');
  } else {
    root.style.setProperty('--main-bg', '#ffffff');
    root.style.setProperty('--text-color', '#000000');
    root.style.setProperty('--accent', '#007bff');
  }
}

// Interactive animations
function animateElement(element, scale, rotation, opacity) {
  element.style.setProperty('--scale', scale);
  element.style.setProperty('--rotation', `${rotation}deg`);
  element.style.setProperty('--opacity', opacity);
}

// Get variable values
const currentAccent = getComputedStyle(document.documentElement)
  .getPropertyValue('--accent').trim();

// Responsive font sizing
function updateFontScale() {
  const width = window.innerWidth;
  const scale = Math.max(0.8, Math.min(1.2, width / 1200));
  document.documentElement.style.setProperty('--font-scale', scale);
}

window.addEventListener('resize', updateFontScale);
```

### Advanced Variable Techniques

```css
/* Conditional variables using space toggle technique */
:root {
  --is-dark: 0; /* 0 for light, 1 for dark */
  --light-color: #ffffff;
  --dark-color: #000000;
  
  /* This creates conditional behavior */
  --bg-color: hsl(0, 0%, calc(100% * (1 - var(--is-dark))));
}

/* Variable composition */
:root {
  --size-unit: 1rem;
  --size-scale: 1.25;
  
  /* Create harmonious size scale */
  --size-xs: calc(var(--size-unit) / var(--size-scale) / var(--size-scale));
  --size-sm: calc(var(--size-unit) / var(--size-scale));
  --size-md: var(--size-unit);
  --size-lg: calc(var(--size-unit) * var(--size-scale));
  --size-xl: calc(var(--size-unit) * var(--size-scale) * var(--size-scale));
}

/* Invalid at computed value time (IACVT) pattern */
.toggle {
  --enabled: ; /* Empty value, invalid */
  
  /* Only applies when --enabled is set to initial */
  background: var(--enabled, blue);
  color: var(--enabled, white);
}

.toggle.active {
  --enabled: initial; /* Makes the variable valid */
}

/* Variable interpolation in animations */
@keyframes pulse {
  0% { 
    transform: scale(var(--start-scale, 1)); 
  }
  50% { 
    transform: scale(var(--mid-scale, 1.1)); 
  }
  100% { 
    transform: scale(var(--end-scale, 1)); 
  }
}

.pulsing-element {
  --start-scale: 1;
  --mid-scale: 1.05;
  --end-scale: 1;
  animation: pulse 2s infinite;
}
```

---

## üßÆ CSS Functions

CSS functions enable dynamic calculations and intelligent value selection, making your styles more flexible and responsive.

### calc() - Mathematical Operations

Perform calculations with different units and create dynamic relationships:

```css
.responsive-container {
  /* Basic calculations with mixed units */
  width: calc(100% - 2rem);
  height: calc(100vh - var(--header-height, 60px));
  
  /* Complex calculations */
  margin: calc(var(--spacing-unit) * 2);
  font-size: calc(1rem + 0.5vw);
  
  /* Nested calculations */
  padding: calc(var(--base-padding) + calc(2vw + 0.5rem));
}

.grid-system {
  /* Calculate column width with gaps */
  --columns: 3;
  --gap: 1rem;
  width: calc((100% - (var(--gap) * (var(--columns) - 1))) / var(--columns));
  
  /* Responsive grid without media queries */
  grid-template-columns: repeat(auto-fit, minmax(calc(300px - 2rem), 1fr));
}

.geometric-shapes {
  /* Mathematical relationships */
  --size: 100px;
  width: var(--size);
  height: var(--size);
  
  /* Create perfect circle */
  border-radius: calc(var(--size) / 2);
  
  /* Golden ratio calculations */
  --golden-ratio: 1.618;
  aspect-ratio: var(--golden-ratio);
}

.animation-timing {
  /* Dynamic animation values */
  --base-duration: 300ms;
  --multiplier: 2;
  
  animation-duration: calc(var(--base-duration) * var(--multiplier));
  animation-delay: calc(var(--base-duration) / 2);
}

.responsive-typography {
  /* Fluid typography with limits */
  font-size: calc(1rem + (2vw - 0.5rem));
  line-height: calc(1.2 + (0.4 * var(--font-scale, 1)));
  
  /* Spacing based on font size */
  margin-bottom: calc(1em * var(--spacing-multiplier, 1.5));
}
```

### min(), max(), clamp() - Range Control

Control value ranges for truly responsive design without media queries:

```css
/* clamp() for fluid responsive values */
.responsive-text {
  /* clamp(minimum, preferred, maximum) */
  font-size: clamp(1rem, 4vw, 2.5rem);
  
  /* Responsive spacing that scales with viewport */
  padding: clamp(1rem, 5vw, 3rem);
  
  /* Line height that adapts to font size */
  line-height: clamp(1.2, 1.4 + 0.2vw, 1.8);
}

.container-sizing {
  /* Minimum size but can grow */
  width: max(300px, 50vw);
  
  /* Maximum constraint */
  max-width: min(1200px, 90vw);
  
  /* Combined approach */
  width: clamp(300px, 80vw, 1200px);
}

.fluid-grid {
  /* Responsive grid columns */
  grid-template-columns: repeat(
    auto-fit, 
    minmax(min(250px, 100%), 1fr)
  );
  
  /* Fluid gaps */
  gap: clamp(1rem, 3vw, 2rem);
}

.responsive-images {
  /* Image sizing with constraints */
  width: min(100%, 500px);
  height: clamp(200px, 40vw, 400px);
  object-fit: cover;
}

.adaptive-layout {
  /* Sidebar that collapses intelligently */
  --sidebar-width: clamp(200px, 25vw, 300px);
  --main-width: calc(100% - var(--sidebar-width));
  
  grid-template-columns: var(--sidebar-width) var(--main-width);
}

/* Advanced responsive patterns */
.magazine-layout {
  /* Column count based on available space */
  columns: max(1, min(3, calc((100vw - 40rem) / 20rem)));
  column-gap: clamp(1rem, 4vw, 3rem);
}

.responsive-cards {
  /* Card sizing that adapts to content and viewport */
  --min-card-width: 280px;
  --max-card-width: 400px;
  --ideal-card-width: calc((100vw - 4rem) / 3);
  
  width: clamp(
    var(--min-card-width), 
    var(--ideal-card-width), 
    var(--max-card-width)
  );
}
```

### var() - Variable Access

Access CSS variables with sophisticated fallback strategies:

```css
.component {
  /* Basic usage */
  color: var(--primary-color);
  
  /* Single fallback */
  background: var(--bg-color, #f0f0f0);
  
  /* Multiple fallback levels */
  border-color: var(--border-primary, var(--border-secondary, #ddd));
  
  /* Variable composition */
  box-shadow: var(--shadow-offset-x, 0) 
              var(--shadow-offset-y, 2px) 
              var(--shadow-blur, 4px) 
              var(--shadow-color, rgba(0,0,0,0.1));
}

.contextual-styling {
  /* Conditional styling using variables */
  --is-active: initial;
  --is-disabled: ;
  
  background: var(--is-active, var(--active-bg, blue));
  opacity: var(--is-disabled, 0.5);
}

.theme-aware {
  /* Theme-dependent values */
  color: var(--text-primary, var(--fallback-text, #000));
  background: var(--bg-primary, var(--fallback-bg, #fff));
  
  /* Computed fallbacks */
  border: 1px solid var(--border-color, 
    var(--text-primary, #000));
}

### Other Useful Functions

Additional CSS functions for specific use cases:

```css
.advanced-functions {
  /* URL function for dynamic assets */
  background-image: url(var(--bg-image, 'default.jpg'));
  
  /* Attribute function */
  content: attr(data-label);
}

.container-queries {
  /* Container-relative units */
  container-type: inline-size;
  
  width: 50cqw; /* 50% of container width */
  height: 30cqh; /* 30% of container height */
}

.modern-layout {
  /* Logical properties with functions */
  margin-inline: max(1rem, 5vw);
  padding-block: clamp(1rem, 3vh, 2rem);
  
  /* Aspect ratio with calculations */
  aspect-ratio: calc(16 / 9);
}
```

---

## üöÄ Real-World Applications

Let's explore comprehensive, production-ready examples that demonstrate the power of CSS variables and functions.

### Complete Theme System

Build a robust, maintainable theme system:

```css
/* Base design tokens */
:root {
  /* Color palette */
  --color-primary-50: #eff6ff;
  --color-primary-100: #dbeafe;
  --color-primary-500: #3b82f6;
  --color-primary-600: #2563eb;
  --color-primary-900: #1e3a8a;
  
  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-500: #6b7280;
  --color-gray-900: #111827;
  
  /* Semantic color mapping */
  --color-background: var(--color-gray-50);
  --color-surface: #ffffff;
  --color-text-primary: var(--color-gray-900);
  --color-text-secondary: var(--color-gray-500);
  --color-accent: var(--color-primary-500);
  --color-accent-hover: var(--color-primary-600);
  
  /* Typography scale */
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-2xl: 1.5rem;
  --font-size-3xl: 1.875rem;
  --font-size-4xl: 2.25rem;
  
  /* Spacing scale */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-12: 3rem;
  --space-16: 4rem;
  
  /* Component tokens */
  --border-radius-sm: 0.25rem;
  --border-radius-md: 0.375rem;
  --border-radius-lg: 0.5rem;
  --border-radius-xl: 0.75rem;
  
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  
  --transition-fast: 150ms ease-out;
  --transition-base: 200ms ease-out;
  --transition-slow: 300ms ease-out;
}

/* Dark theme overrides */
[data-theme="dark"] {
  --color-background: var(--color-gray-900);
  --color-surface: #1f2937;
  --color-text-primary: var(--color-gray-50);
  --color-text-secondary: var(--color-gray-100);
  --color-accent: var(--color-primary-400);
  --color-accent-hover: var(--color-primary-300);
}

/* High contrast theme */
[data-theme="high-contrast"] {
  --color-background: #000000;
  --color-surface: #000000;
  --color-text-primary: #ffffff;
  --color-text-secondary: #ffffff;
  --color-accent: #ffff00;
  --color-accent-hover: #ffff99;
}

/* Component using the theme system */
.card {
  background: var(--color-surface);
  color: var(--color-text-primary);
  padding: var(--space-6);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow-md);
  transition: box-shadow var(--transition-base);
}

.card:hover {
  box-shadow: var(--shadow-lg);
}

.button {
  background: var(--color-accent);
  color: var(--color-surface);
  padding: var(--space-3) var(--space-6);
  border: none;
  border-radius: var(--border-radius-md);
  font-size: var(--font-size-base);
  transition: background-color var(--transition-fast);
  cursor: pointer;
}

.button:hover {
  background: var(--color-accent-hover);
}
```

## üí° Pro Tips

### 1. Naming Convention
```css
/* Use consistent naming patterns */
:root {
  /* Colors */
  --color-primary-500: #3498db;
  --color-primary-600: #2980b9;
  
  /* Spacing */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  
  /* Typography */
  --font-size-sm: 0.875rem;
  --line-height-tight: 1.25;
}
```

### 2. Browser Support Fallbacks
```css
.modern-component {
  /* Fallback for older browsers */
  font-size: 1.25rem;
  
  /* Modern responsive font size */
  font-size: clamp(1rem, 4vw, 2rem);
  
  /* Variable with fallback */
  color: #333;
  color: var(--text-primary, #333);
}
```

---

## üéØ Quick Reference

| Function | Purpose | Example |
|----------|---------|---------|
| `var()` | Use CSS variable | `var(--color, blue)` |
| `calc()` | Mathematical calculations | `calc(100% - 2rem)` |
| `min()` | Minimum value | `min(100px, 50vw)` |
| `max()` | Maximum value | `max(16px, 1rem)` |
| `clamp()` | Value within range | `clamp(1rem, 4vw, 2rem)` |

---

## üöÄ Next Steps

**Practice these concepts:**
1. Build a theme switcher using CSS variables
2. Create a responsive layout using `clamp()` and `calc()`
3. Design a component system with variable-based variants
4. Implement a fluid typography scale

**Explore advanced topics:**
- CSS Container Queries with variables
- CSS Houdini custom properties
- CSS-in-JS with CSS variables

---

*CSS variables and functions are powerful tools for creating maintainable, responsive, and dynamic stylesheets. Start small and gradually incorporate them into your workflow!* ‚ú®

---

**‚è±Ô∏è Total Time:** 5 minutes  
**üîó Learn More:** [MDN CSS Custom Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/--*)
